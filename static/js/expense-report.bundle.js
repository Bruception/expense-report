(()=>{"use strict";var e={545:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.calculateExpenseReport=void 0;t.calculateExpenseReport=(e,t)=>{const n=t.contributions.map((t=>{const n=e[t.name],o=n?parseFloat(n):0;return{...t,amount:o}})).filter((e=>e.amount>0)),o={};return t.contributors.forEach((e=>{o[e.name]={expenses:[],total:0}})),t.expenseRecord.forEach((e=>{let t=e.contributions.reduce(((e,t)=>{const o=n.find((e=>e.name===t));return e+(o?.amount||0)}),0);const a=[...e.expenses];a.sort((e=>"amount"in e?-1:1)),a.forEach((n=>{const a=((e,t)=>(e=>void 0!==e.percentage)(e)?((e,t)=>e.percentage*t/100)(e,t):(e=>void 0!==e.amount)(e)?((e,t)=>Math.min(e.amount,t))(e,t):0)(n,t),r={payee:n.payee??e.payee,amount:a,items:[...e.contributions]};o[n.payer].expenses.push(r),o[n.payer].total+=a,"amount"in n&&(t-=a),t=Math.max(0,t)}))})),Object.entries(o).forEach((e=>{let[t,n]=e;const o={};n.expenses.forEach((e=>{o[e.payee]?(o[e.payee].amount+=e.amount,o[e.payee].items.push(...e.items)):o[e.payee]={...e}})),n.expenses=Object.values(o),n.expenses.forEach((e=>{e.amount=e.amount})),n.total=n.total})),o}},863:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const n={RENT:"Rent",LIGHT:"Light",WATER:"Water",CABLE:"Cable",GARBAGE:"Garbage",BANK_FEE:"Bank Fee",AUTO_INSURANCE:"Auto Insurance"},o={B:"B",L:"L",H:"H",M:"M",I:"I"},a=Object.values(n).map((e=>({name:e}))),r=Object.values(o).map((e=>({name:e})));t.config={contributions:a,contributors:r,expenseRecord:[{contributions:[n.RENT,n.BANK_FEE],payee:o.L,expenses:[{payer:o.B,percentage:36},{payer:o.L,percentage:20},{payer:o.M,percentage:10},{payer:o.H,percentage:2},{payer:o.I,percentage:32}]},{contributions:[n.LIGHT,n.WATER,n.GARBAGE],payee:o.L,expenses:[{payer:o.B,percentage:25},{payer:o.H,percentage:25},{payer:o.M,percentage:25},{payer:o.I,percentage:25}]},{contributions:[n.CABLE],payee:o.H,expenses:[{payer:o.B,amount:15},{payer:o.M,amount:20},{payer:o.I,amount:15},{payer:o.H,percentage:100}]},{contributions:[n.AUTO_INSURANCE],payee:o.M,expenses:[{payer:o.B,percentage:25},{payer:o.H,percentage:25},{payer:o.M,percentage:25},{payer:o.I,percentage:25}]}]}},890:function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,a)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.generateUI=t.generateExpenseReport=void 0;const c=r(n(895)),p=n(545);t.generateExpenseReport=e=>{const t=document.getElementById("expense-report");t.innerHTML="";const n=document.createElement("h3");n.id="report-total",n.textContent=`Total For This Month: $${Object.values(e).reduce(((e,t)=>e+t.total),0).toFixed(2)}`,t.appendChild(n);const o=document.createElement("h2");o.textContent="Breakdown",t.appendChild(o);const a=document.createElement("hr");t.appendChild(a),Object.entries(e).forEach((e=>{let[n,o]=e;const a=document.createElement("div");a.className="contributor-container";const r=document.createElement("h3");r.textContent=n,a.appendChild(r),o.expenses.filter((e=>e.amount>0)).forEach((e=>{const t=document.createElement("div");t.className="expense-item";const n=document.createElement("span");n.innerHTML=`Pay To: <span class="highlight">${e.payee}</span> `,t.appendChild(n);const o=document.createElement("div");o.textContent=`Amount: $${e.amount.toFixed(2)}`,t.appendChild(o);const r=document.createElement("span");r.textContent="For: ",t.appendChild(r);const c=document.createElement("ul");e.items.forEach((e=>{const t=document.createElement("li");t.textContent=e,c.appendChild(t)})),t.appendChild(c),a.appendChild(t)}));const c=document.createElement("div");c.className="total",c.textContent=`Total: $${o.total.toFixed(2)}`,a.appendChild(c),a.appendChild(document.createElement("hr")),t.appendChild(a)}))},t.generateUI=e=>{const n=document.getElementById("root");if(!n)return;const{contributions:o}=e,a=document.createElement("form");a.id="contribution-form";const r=document.createElement("div");r.id="expense-report",o.forEach((n=>{const o=document.createElement("div");o.classList.add("contribution-group");const r=document.createElement("label");r.textContent=n.name,o.appendChild(r);const s=document.createElement("input");s.type="number",s.name=n.name,s.setAttribute("min","0"),s.setAttribute("step","0.01"),s.placeholder="Enter amount",o.appendChild(s),s.addEventListener("input",(o=>{o.preventDefault();const r=new FormData(a),i=Object.fromEntries(r.entries()),u=c.base64URLEncode(JSON.stringify(i));window.history.replaceState({},"",`?contributions=${u}`),i[n.name]=s.value;const d=(0,p.calculateExpenseReport)(i,e);(0,t.generateExpenseReport)(d)})),a.appendChild(o)})),n.appendChild(a),n.appendChild(r),(e=>{const n=new URLSearchParams(window.location.search).get("contributions");if(!n)return;const o=JSON.parse(c.base64URLDecode(n)),a=document.getElementById("contribution-form");if(!a)return;const r=new FormData(a),s={...Object.fromEntries(r.entries()),...o};Object.entries(s).forEach((e=>{let[t,n]=e;const o=document.querySelector(`input[name="${t}"]`);o&&(o.value=n)}));const i=(0,p.calculateExpenseReport)(s,e);(0,t.generateExpenseReport)(i)})(e)}},895:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.base64URLDecode=t.base64URLEncode=void 0,t.base64URLEncode=e=>encodeURIComponent(btoa(e)),t.base64URLDecode=e=>atob(decodeURIComponent(e))}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var r=t[o]={exports:{}};return e[o].call(r.exports,r,r.exports,n),r.exports}(()=>{const e=n(890),t=n(863);window.onload=()=>{(0,e.generateUI)(t.config)}})()})();